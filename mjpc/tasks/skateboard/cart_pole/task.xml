<mujoco model="Skateboard CartPole">
  <include file="../../common.xml"/>
  <include file="../skateboard.xml" />
  <include file="./cart_pole.xml" />
  <size memory="800K"/>

  <custom>  
    <numeric name="agent_planner" data="3" />
    <numeric name="agent_horizon" data="1.35" />
    <numeric name="agent_timestep" data="0.015" />
    <numeric name="sampling_spline_points" data="3" />
    <numeric name="sampling_exploration" data="0.05" />
    <numeric name="gradient_spline_points" data="5" />
    <numeric name="residual_Heading" data="0.0 -1.57079 +1.57079" />
    <numeric name="residual_Velocity" data="0.0 -3 +3" />
  </custom>


  <worldbody>
    <camera name="side" mode="trackcom" pos="-3.794 -2.634 2.085" xyaxes="0.536 -0.844 0.000 0.294 0.187 0.937"/>
    <camera name="close" mode="trackcom"  pos="-1.695 -1.870 1.312" xyaxes="0.702 -0.713 -0.000 0.261 0.257 0.930"/>
    <camera name="top" mode="trackcom" pos="-0.405 -1.688 20.714" xyaxes="-0.008 -1.000 0.000 1.000 -0.008 0.017"/>

    <body name="goal" mocap="true" pos=".3 0 0.26">
      <geom size="0.15" contype="0" conaffinity="0" rgba="0 1 0 1" group="2"/>
    </body>
    <geom name="floor" type="plane" conaffinity="1" size="50 50 .05" material="blue_grid"/>

  </worldbody>

  <equality>
    <!-- weld to board_center for balancing-->
    <weld body1="cartpole" body2="board_center" torquescale="0.5" />
  </equality>

  <sensor>
    <user name="Velocity" dim="1" user="0 10.0 0 100.0" />
    <user name="Goal Position" dim="3" user="2 0.2 0 0.5 0.1" />
    <user name="Goal Orientation" dim="1" user="0 10.0 0 100.0" />

    <user name="Upright" dim="1" user="0 10.0 0 100.0" />

    <user name="Joint Vel." dim="3" user="0 0 0.0 0.1" />
    <user name="Control" dim="3" user="3 0.03 0.0 0.1 0.3" />

    <framepos name="trace0" objtype="body" objname="board"/>
    <framelinvel name="board_linvel" objtype="body" objname="board" />
    <frameangvel name="board_angvel" objtype="body" objname="board"/>
    <framezaxis name="pole_z" objtype="xbody" objname="pole"/>
  </sensor>

   <keyframe>
    <key name="home" qpos='5.43295e-05 0.0118274 0.138635 1 -0.000151644 -3.16902e-10 -4.3344e-06 0.00375642 0.00278779 0.686686 0.838409 0.00278779 -0.683914 -0.835796 5.42464e-05 0.0151123 0.15811 0.999997 0.00234836 -1.62942e-08 -2.05345e-06 -0.0167769 0'/>
  </keyframe>

</mujoco>
